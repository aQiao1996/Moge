# 核心开发规则

## 1. 依赖管理规范

- 📦 **唯一包管理器**：必须使用pnpm，禁用npm/yarn
- 🏢 **Workspace统一**：所有依赖版本在`pnpm-workspace.yaml`中统一管理
- 🔖 **Catalog引用**：子项目package.json中使用`"dependency": "catalog:"`占位符
- ⚠️ **禁止直接版本**：禁止在子项目中直接指定具体版本号
- 🚫 **禁止重复安装**：不在子目录单独运行`pnpm install`

## 2. Toast通知规范

- ✅ **保留成功通知**：业务操作成功时使用 `toast.success()` 显示成功提示
- ❌ **删除错误通知**：所有HTTP错误由 `request/index.ts` 全局处理，业务代码不应手动添加错误toast
- 📝 **异常处理**：catch块中只保留 `console.error()` 用于调试，不显示用户错误提示

## 3. 代码质量检查

- 🔧 **必须执行**：每次代码修改后在根目录执行 `pnpm run lint` 和 `pnpm run typecheck`
- ✅ **通过标准**：代码必须通过所有lint和类型检查，无警告无错误
- 🚫 **禁止提交**：有lint或类型错误的代码不得提交,不需要执行 `git` 相关操作

## 4. 注释与文档

- 🈯 **中文注释**：所有代码注释必须使用中文，便于团队理解
- 📖 **注释原则**：注释应解释"为什么"而不是"是什么"
- 🚫 **避免无用注释**：禁止添加"简化版"、"直接使用XX"等无意义的状态描述注释
- 🔤 **英文保留**：仅在技术术语、API名称等必要场景保留英文
- 📝 **JSDoc标准**：公共函数、Service方法、API接口必须使用JSDoc格式
- 🏷️ **分层注释**：核心层用完整JSDoc，业务层用简化JSDoc，实现层用行内注释
- 🧠 **逻辑注释**：函数内部只有逻辑稍微复杂的地方才需要增加简单的中文注释
- 📋 **必备要素**：JSDoc须包含功能描述、参数说明、返回值说明、异常情况（如适用）
- 💬 **Props注释**：接口（Interface）或类型（Type）的字段应使用内联注释（`//`）说明其用途，尤其是在表单、对话框等复杂组件中。

## 5. TypeScript类型规范

- 🚫 **禁用 as any**：严禁使用 `as any` 绕过类型检查
- ⚠️ **谨慎使用 unknown**：类型确实无法确定时可使用 `unknown`，但需添加类型保护
- ✅ **类型安全**：优先使用精确的类型定义，必要时创建新的接口或类型别名
- 🛡️ **类型保护**：使用类型守卫函数确保运行时类型安全
- 📦 **共享类型**：全局类型定义统一放在`packages/types`中
- 🔒 **严禁绕过检查**：严禁使用 `// @ts-ignore`、`// @ts-nocheck`、`// eslint-disable` 等注释绕过类型检查或lint规则，必须从根本上解决问题而非隐藏错误

## 6. 错误处理模式

- 🎯 **统一处理**：依赖全局错误处理机制，避免重复的错误处理逻辑
- 📝 **日志记录**：保留console.error用于开发调试和问题追踪
- 🔄 **优雅降级**：确保错误不会导致页面崩溃，提供合理的备用方案
