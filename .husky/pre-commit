#!/usr/bin/env bash
set -euo pipefail

# åŠ è½½ nvm
[ -s "$HOME/.nvm/nvm.sh" ] && source "$HOME/.nvm/nvm.sh"
# ç¡®ä¿ nodeã€pnpm éƒ½åœ¨ PATH
command -v node >/dev/null 2>&1 || { echo "âŒ node æœªå®‰è£…"; exit 1; }
command -v pnpm >/dev/null 2>&1 || { echo "âŒ pnpm æœªå®‰è£…"; exit 1; }

echo "âœ… node ç‰ˆæœ¬: $(node -v)  è·¯å¾„: $(command -v node)"

# æ‰§è¡Œ lint-staged
echo "ğŸš€ æ­£åœ¨æ‰§è¡Œ lint-staged..."
pnpm lint-staged

# æ‰§è¡Œ commitlint
echo "ğŸš€ æ­£åœ¨æ‰§è¡Œ commitlint..."
printf 'commitlint --edit å‚æ•°ï¼š%q\n' "${1:-}"
pnpm commitlint --edit "${1:-}"
